% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/clean.nc.df.R
\name{clean.nc.df}
\alias{clean.nc.df}
\title{Clean gridded NetCDF data frames for spatial polygon plotting}
\usage{
clean.nc.df(
  df,
  lon.range = c(-180, 180),
  lat.range = c(-90, 90),
  split.dateline = TRUE,
  verbose = FALSE
)
}
\arguments{
\item{df}{A data frame containing grid-cell bounds with columns
\code{lon.min}, \code{lon.max}, \code{lat.min}, \code{lat.max}.
Optional columns (e.g. \code{lon.mid}, \code{lat.mid}, data variables)
are preserved.}

\item{lon.range}{Numeric length-2 vector giving the target longitude range
for plotting (default \code{c(-180, 180)}).}

\item{lat.range}{Numeric length-2 vector giving the valid latitude range
(default \code{c(-90, 90)}).}

\item{split.dateline}{Logical; if TRUE (default), grid cells that cross
the dateline are split into two valid polygons. If FALSE, such cells
are dropped.}

\item{verbose}{Logical; if TRUE, print messages describing corrections.}
}
\value{
A cleaned data frame suitable for polygon-based spatial plotting.
Dateline-crossing grid cells may be duplicated and split into two rows.
}
\description{
This function prepares gridded model output extracted from NetCDF files
for safe polygon-based spatial plotting. It normalises longitude
conventions, repairs or splits grid cells that cross the dateline,
and removes invalid geographic ranges.
}
\details{
The function is model-agnostic and is designed to work with output from
\code{cGENIE.data()}, \code{nc.list.to.df()}, or similar NetCDF extraction
workflows. It handles common longitude conventions including
\code{-180–180}, \code{0–360}, and mis-specified but topologically correct
grids (e.g. \code{-90–270}, \code{-260–90}).

Longitude normalisation is performed using modular arithmetic to preserve
grid topology. Grid cells whose longitudinal extent exceeds half the
plotting range are interpreted as crossing the dateline. When
\code{split.dateline = TRUE}, these cells are split into two valid
longitude intervals on either side of the dateline.
}
